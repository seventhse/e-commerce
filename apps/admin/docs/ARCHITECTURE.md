# Admin 系统架构文档

## 1. 概述

Admin系统是一个基于React的现代化管理后台，用于管理电商平台的各种资源，包括用户、商品、订单等。该系统采用了最新的前端技术栈，提供了丰富的UI组件和功能模块，以满足电商平台的管理需求。

## 2. 技术栈

### 核心框架和库

- **React 19**: 用于构建用户界面的JavaScript库
- **TypeScript**: 提供静态类型检查
- **Vite**: 现代化的前端构建工具
- **TanStack Router**: 用于路由管理
- **TanStack Query**: 用于数据获取和缓存
- **Zustand**: 轻量级状态管理库
- **React Hook Form**: 表单处理库
- **Zod**: 数据验证库
- **Axios**: HTTP客户端

### UI组件和样式

- **Tailwind CSS**: 实用优先的CSS框架
- **Radix UI**: 无样式、可访问性强的UI组件
- **Lucide React**: 图标库
- **Recharts**: 图表库
- **class-variance-authority**: 用于组件样式变体管理
- **tailwind-merge**: 用于合并Tailwind类名

## 3. 项目结构

```
apps/admin/
├── docs/                  # 文档
├── public/                # 静态资源
├── src/                   # 源代码
│   ├── assets/            # 静态资源
│   ├── components/        # 通用组件
│   │   ├── layout/        # 布局组件
│   │   └── ui/            # UI组件
│   ├── config/            # 配置文件
│   ├── context/           # React上下文
│   ├── features/          # 功能模块
│   │   ├── apps/          # 应用管理
│   │   ├── auth/          # 认证相关
│   │   ├── chats/         # 聊天功能
│   │   ├── dashboard/     # 仪表盘
│   │   ├── errors/        # 错误页面
│   │   ├── settings/      # 设置页面
│   │   ├── tasks/         # 任务管理
│   │   └── users/         # 用户管理
│   ├── hooks/             # 自定义Hooks
│   ├── lib/               # 工具库
│   ├── routes/            # 路由定义
│   │   ├── _authenticated/# 需要认证的路由
│   │   └── (auth)/        # 认证相关路由
│   ├── services/          # API服务
│   ├── stores/            # 状态存储
│   └── utils/             # 工具函数
```

## 4. 核心模块

### 4.1 认证模块

认证模块负责用户的登录、注册、密码重置等功能。主要包括：

- 登录页面
- 注册页面
- 忘记密码页面
- OTP验证页面
- 认证状态管理

认证模块使用JWT进行身份验证，并将令牌存储在Cookie中。

### 4.2 用户管理模块

用户管理模块负责管理系统用户，包括：

- 用户列表
- 用户详情
- 用户创建和编辑
- 用户权限管理

### 4.3 商品管理模块

商品管理模块负责管理电商平台的商品，包括：

- 商品列表
- 商品详情
- 商品创建和编辑
- 商品分类管理
- 商品库存管理

### 4.4 订单管理模块

订单管理模块负责管理电商平台的订单，包括：

- 订单列表
- 订单详情
- 订单状态管理
- 订单统计和报表

### 4.5 仪表盘模块

仪表盘模块提供系统的概览信息，包括：

- 销售统计
- 用户增长
- 订单状态分布
- 热门商品

### 4.6 设置模块

设置模块负责系统的各种设置，包括：

- 账户设置
- 外观设置
- 显示设置
- 通知设置
- 个人资料设置

## 5. 路由结构

系统使用TanStack Router进行路由管理，主要路由结构如下：

- `/`: 根路由，重定向到仪表盘
- `/sign-in`: 登录页面
- `/sign-up`: 注册页面
- `/forgot-password`: 忘记密码页面
- `/otp`: OTP验证页面
- `/_authenticated`: 需要认证的路由
  - `/dashboard`: 仪表盘
  - `/users`: 用户管理
  - `/products`: 商品管理
  - `/orders`: 订单管理
  - `/settings`: 设置
    - `/settings/account`: 账户设置
    - `/settings/appearance`: 外观设置
    - `/settings/display`: 显示设置
    - `/settings/notifications`: 通知设置
    - `/settings/profile`: 个人资料设置

## 6. 状态管理

系统使用Zustand进行状态管理，主要的状态包括：

- 认证状态：存储用户登录信息和JWT令牌
- 主题状态：存储用户界面主题设置
- 侧边栏状态：存储侧边栏的展开/折叠状态
- 搜索状态：存储搜索相关状态

## 7. API集成

系统使用Axios进行API调用，并使用TanStack Query进行数据获取和缓存。API服务按功能模块组织，包括：

- 认证服务
- 用户服务
- 商品服务
- 订单服务
- 设置服务

## 8. 组件库

系统使用Radix UI作为基础组件库，并结合Tailwind CSS进行样式定制。主要组件包括：

- 布局组件：页面布局、侧边栏、导航栏等
- 表单组件：输入框、选择框、复选框、单选框等
- 数据展示组件：表格、列表、卡片等
- 反馈组件：对话框、提示框、通知等
- 导航组件：菜单、标签页、面包屑等

## 9. 安全性

系统采用以下措施确保安全性：

- 使用JWT进行身份验证
- 路由级别的权限控制
- 表单数据验证
- CSRF保护
- XSS防护

## 10. 性能优化

系统采用以下措施优化性能：

- 代码分割和懒加载
- 组件缓存
- 数据缓存
- 图片优化
- 按需加载

## 11. 可访问性

系统注重可访问性设计，包括：

- 语义化HTML
- 键盘导航支持
- 屏幕阅读器支持
- 高对比度模式
- 响应式设计

## 12. 国际化

系统支持多语言，使用i18n库进行国际化管理。

## 13. 主题定制

系统支持主题定制，包括：

- 明暗模式切换
- 主题色定制
- 布局定制

## 14. 开发工具

系统提供以下开发工具：

- React Query DevTools
- TanStack Router DevTools
- TypeScript类型检查
- ESLint代码检查
- Prettier代码格式化

## 15. 部署

系统使用Vite进行构建，可以部署到任何静态文件服务器。

## 16. 未来规划

- 添加更多数据可视化组件
- 增强权限管理系统
- 添加更多集成第三方服务的功能
- 优化移动端体验
- 添加更多自动化测试
